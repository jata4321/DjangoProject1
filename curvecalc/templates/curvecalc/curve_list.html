{% extends 'curvecalc\base.html' %}

{% block static %}
    {{ block.super }}
    {% load static %}

    <link rel="stylesheet" href="{% static 'curvecalc\css\styles_pro.css' %}">
{% endblock %}

{% block title %}
    <title>CurveList</title>
{% endblock %}

{% block content %}
<div class="container">
    <div class="card card-body mt-5">
        <h1 class="display-4 mt-3">Yield Curve Calculator+.</h1>
        <ol>
            <li><a href="{% url 'navigator:index' %}">Navigator Page</a></li>
            <li><a href="{% url 'curvecalc:curve_create' %}">Create Curve</a></li>
            <li><a href="{% url 'portcalc:index' %}">Portfolio Calculator</a></li>
            <li><a href="{% url 'curvecalc:curve_form'%}">Form Curve</a></li>
        </ol>
    </div>
</div>
<div class="container mt-3">
    <div class="card">
        <div class="card-body">
            <form method="get" class="row g-3 align-items-end">
                <div class="col-md-5">
                    <label for="{{ date_form.start_date.id_for_label }}" class="form-label">Start Date</label>
                    {{ date_form.start_date }}
                </div>
                <div class="col-md-5">
                    <label for="{{ date_form.end_date.id_for_label }}" class="form-label">End Date</label>
                    {{ date_form.end_date }}
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">Filter</button>
                </div>
            </form>
        </div>
    </div>
    <table class="table table-striped table-hover table-dark mt-3 rounded-3"
           style="border-radius: 5px; overflow: hidden;">
        <thead>
            <tr class="lead">
                <th class="scope-col text-center">Tenor</th>
                <th class="scope-col text-center">Details</th>
                <th class="scope-col text-center">Update</th>
                <th class="scope-col text-center">Delete</th>
            </tr>
        </thead>
       {% for tenor in tenor_list %}
           <tr class="table-active">
               <td><a href="{% url 'curvecalc:curve_detail' pk=tenor.pk%}">{{ tenor }}</a></td>
               <td class="text-center"><a href="{% url 'curvecalc:curve_detail' pk=tenor.pk%}" class="btn btn-primary">Details</a></td>
               <td class="text-center"><a href="{% url 'curvecalc:curve_update' pk=tenor.pk%}" class="btn btn-warning">Update</a></td>
               <td class="text-center"><a href="{% url 'curvecalc:curve_delete' pk=tenor.pk%}" class="btn btn-danger">Delete</a></td>
           </tr>
       {% endfor %}
    </table>
</div>
<div class="pagination justify-content-center my-4">
    {% if page_obj.paginator.num_pages > 1 %}
        <nav aria-label="Page navigation">
            <ul class="pagination">
                {% if page_obj.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if request.GET.start_date %}&start_date={{ request.GET.start_date }}{% endif %}{% if request.GET.end_date %}&end_date={{ request.GET.end_date }}{% endif %}">&laquo;</a>
                    </li>
                {% endif %}

                <li class="page-item active">
                    <span class="page-link">
                        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                    </span>
                </li>

                {% if page_obj.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if request.GET.start_date %}&start_date={{ request.GET.start_date }}{% endif %}{% if request.GET.end_date %}&end_date={{ request.GET.end_date }}{% endif %}">&raquo;</a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
</div>

{% endblock %}

{% block chart %}
{% endblock chart %}

{% block footer %}
<br>
<p><small>Footer:</small></p>
    <small> &copy; Copyright TJ. 2025. <em>All</em> rights reserved.</small>
{% endblock %}